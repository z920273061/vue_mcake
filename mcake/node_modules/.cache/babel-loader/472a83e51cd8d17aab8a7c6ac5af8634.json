{"remainingRequest":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\thread-loader\\dist\\cjs.js!E:\\WorkSpace\\cakeProject\\cake\\node_modules\\babel-loader\\lib\\index.js!E:\\WorkSpace\\cakeProject\\cake\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\WorkSpace\\cakeProject\\cake\\src\\api\\http.js","dependencies":[{"path":"E:\\WorkSpace\\cakeProject\\cake\\src\\api\\http.js","mtime":1576030039135},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwoKdmFyIF90aGlzID0gdGhpczsKCi8qKg0KICogYXhpb3PlsIHoo4UNCiAqIOivt+axguaLpuaIquOAgeWTjeW6lOaLpuaIquOAgemUmeivr+e7n+S4gOWkhOeQhg0KICovCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlL2luZGV4IjsKLyoqDQogKiDmj5DnpLrlh73mlbANCiAqLwoKdmFyIHRpcCA9IGZ1bmN0aW9uIHRpcChtc2cpIHsKICB2YXIgdHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2luZm8nOwoKICBfdGhpcy4kbWVzc2FnZSh7CiAgICBtZXNzYWdlOiBtc2csCiAgICB0eXBlOiB0eXBlLAogICAgZHVyYXRpb246IDE1MDAKICB9KTsKfTsKLyoqDQogKiDot7PovaznmbvlvZXpobUNCiAqIOaQuuW4puW9k+WJjemhtemdoui3r+eUse+8jOS7peacn+WcqOeZu+W9lemhtemdouWujOaIkOeZu+W9leWQjui/lOWbnuW9k+WJjemhtemdog0KICovCgoKdmFyIHRvTG9naW4gPSBmdW5jdGlvbiB0b0xvZ2luKCkgewogIHJvdXRlci5yZXBsYWNlKHsKICAgIHBhdGg6ICcvbG9naW4nLAogICAgcXVlcnk6IHsKICAgICAgcmVkaXJlY3Q6IHJvdXRlci5jdXJyZW50Um91dGUuZnVsbFBhdGgKICAgIH0KICB9KTsKfTsKLyoqDQogKiDlkIzkuIDor7fmsYLlnLDlnYANCiAqLwoKCnZhciBCQVNFX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvJzsKLyoqDQogKiDor7fmsYLlpLHotKXlkI7nmoTplJnor6/nu5/kuIDlpITnkIYNCiAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXMg6K+35rGC5aSx6LSl55qE54q25oCB56CBDQogKi8KCnZhciBlcnJvckhhbmRsZSA9IGZ1bmN0aW9uIGVycm9ySGFuZGxlKHN0YXR1cywgb3RoZXIpIHsKICAvLyDnirbmgIHnoIHliKTmlq0KICBzd2l0Y2ggKHN0YXR1cykgewogICAgLy8gNDAxOiDmnKrnmbvlvZXnirbmgIHvvIzot7PovaznmbvlvZXpobUKICAgIGNhc2UgNDAxOgogICAgICB0b0xvZ2luKCk7CiAgICAgIGJyZWFrOwogICAgLy8gNDAzIHRva2Vu6L+H5pyfCiAgICAvLyDmuIXpmaR0b2tlbuW5tui3s+i9rOeZu+W9lemhtQoKICAgIGNhc2UgNDAzOgogICAgICB0aXAoJ+eZu+W9lei/h+acn++8jOivt+mHjeaWsOeZu+W9lScpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgc3RvcmUuY29tbWl0KCdsb2dvdXQnLCBmYWxzZSk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHRvTG9naW4oKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIGJyZWFrOwogICAgLy8gNDA06K+35rGC5LiN5a2Y5ZyoCgogICAgY2FzZSA0MDQ6CiAgICAgIHRpcCgn6K+35rGC55qE6LWE5rqQ5LiN5a2Y5ZyoJywgJ2Vycm9yJyk7CiAgICAgIGJyZWFrOwoKICAgIGRlZmF1bHQ6CiAgICAgIGNvbnNvbGUubG9nKG90aGVyKTsKICB9Cn07IC8vIOWIm+W7umF4aW9z5a6e5L6LCgoKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBCQVNFX1VSTCwKICB0aW1lb3V0OiAxMDAwICogMTIKfSk7IC8vIOiuvue9rnBvc3Tor7fmsYLlpLQKCmluc3RhbmNlLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJzsKLyoqDQogKiDor7fmsYLmi6bmiKrlmagNCiAqIOavj+asoeivt+axguWJje+8jOWmguaenOWtmOWcqHRva2Vu5YiZ5Zyo6K+35rGC5aS05Lit5pC65bimdG9rZW4NCiAqLwoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDnmbvlvZXmtYHnqIvmjqfliLbkuK3vvIzmoLnmja7mnKzlnLDmmK/lkKblrZjlnKh0b2tlbuWIpOaWreeUqOaIt+eahOeZu+W9leaDheWGtQogIC8vIOS9huaYr+WNs+S9v3Rva2Vu5a2Y5Zyo77yM5Lmf5pyJ5Y+v6IO9dG9rZW7mmK/ov4fmnJ/nmoTvvIzmiYDku6XlnKjmr4/mrKHnmoTor7fmsYLlpLTkuK3mkLrluKZ0b2tlbgogIC8vIOWQjuWPsOagueaNruaQuuW4pueahHRva2Vu5Yik5pat55So5oi355qE55m75b2V5oOF5Ya177yM5bm26L+U5Zue57uZ5oiR5Lus5a+55bqU55qE54q25oCB56CBCiAgLy8g6ICM5ZCO5oiR5Lus5Y+v5Lul5Zyo5ZON5bqU5oum5oiq5Zmo5Lit77yM5qC55o2u54q25oCB56CB6L+b6KGM5LiA5Lqb57uf5LiA55qE5pON5L2c44CCCiAgdmFyIHRva2VuID0gc3RvcmUuc3RhdGUudG9rZW47CiAgdG9rZW4gJiYgKGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB0b2tlbik7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UuZXJyb3IoZXJyb3IpOwp9KTsgLy8g5ZON5bqU5oum5oiq5ZmoCgppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKCAvLyDor7fmsYLmiJDlip8KZnVuY3Rpb24gKHJlcykgewogIHJldHVybiByZXMuc3RhdHVzID09PSAyMDAgPyBQcm9taXNlLnJlc29sdmUocmVzLmRhdGEpIDogUHJvbWlzZS5yZWplY3QocmVzLmRhdGEpOwp9LCAvLyDor7fmsYLlpLHotKUKZnVuY3Rpb24gKGVycm9yKSB7CiAgdmFyIHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2U7CgogIGlmIChyZXNwb25zZSkgewogICAgLy8g6K+35rGC5bey5Y+R5Ye677yM5L2G5piv5LiN5ZyoMnh455qE6IyD5Zu0CiAgICBlcnJvckhhbmRsZShyZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UpOwogIH0gZWxzZSB7CiAgICAvLyDlpITnkIbmlq3nvZHnmoTmg4XlhrUKICAgIC8vIGVnOuivt+axgui2heaXtuaIluaWree9keaXtu+8jOabtOaWsHN0YXRl55qEbmV0d29ya+eKtuaAgQogICAgLy8gbmV0d29ya+eKtuaAgeWcqGFwcC52dWXkuK3mjqfliLbnnYDkuIDkuKrlhajlsYDnmoTmlq3nvZHmj5DnpLrnu4Tku7bnmoTmmL7npLrpmpDol48KICAgIC8vIOWFs+S6juaWree9kee7hOS7tuS4reeahOWIt+aWsOmHjeaWsOiOt+WPluaVsOaNru+8jOS8muWcqOaWree9kee7hOS7tuS4reivtOaYjgogICAgaWYgKCF3aW5kb3cubmF2aWdhdG9yLm9uTGluZSkgey8vIGg15L2/55SoIHBj5b+955WlCiAgICAgIC8vIHN0b3JlLmNvbW1pdCgnY2hhbmdlTmV0d29yaycsIGZhbHNlKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICB9CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgaW5zdGFuY2U7"},{"version":3,"sources":["E:/WorkSpace/cakeProject/cake/src/api/http.js"],"names":["axios","router","store","tip","msg","type","$message","message","duration","toLogin","replace","path","query","redirect","currentRoute","fullPath","BASE_URL","errorHandle","status","other","localStorage","removeItem","commit","setTimeout","console","log","instance","create","baseURL","timeout","defaults","headers","post","interceptors","request","use","config","token","state","Authorization","error","Promise","response","res","resolve","data","reject","window","navigator","onLine"],"mappings":"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","sourcesContent":["/**\r\n * axios封装\r\n * 请求拦截、响应拦截、错误统一处理\r\n */\r\nimport axios from 'axios';\r\nimport router from '../router';\r\nimport store from '../store/index';\r\n\r\n/**\r\n * 提示函数\r\n */\r\nconst tip = (msg,type = 'info') => {\r\n  this.$message({\r\n    message: msg,\r\n    type: type,\r\n    duration: 1500\r\n  });\r\n}\r\n\r\n/**\r\n * 跳转登录页\r\n * 携带当前页面路由，以期在登录页面完成登录后返回当前页面\r\n */\r\nconst toLogin = () => {\r\n  router.replace({\r\n    path: '/login',\r\n    query: {\r\n      redirect: router.currentRoute.fullPath\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 同一请求地址\r\n */\r\nconst BASE_URL = 'http://localhost:3000/';\r\n\r\n/**\r\n * 请求失败后的错误统一处理\r\n * @param {Number} status 请求失败的状态码\r\n */\r\nconst errorHandle = (status, other) => {\r\n  // 状态码判断\r\n  switch (status) {\r\n    // 401: 未登录状态，跳转登录页\r\n    case 401:\r\n      toLogin();\r\n      break;\r\n    // 403 token过期\r\n    // 清除token并跳转登录页\r\n    case 403:\r\n      tip('登录过期，请重新登录');\r\n      localStorage.removeItem('token');\r\n      store.commit('logout', false);\r\n      setTimeout(() => {\r\n        toLogin();\r\n      }, 1000);\r\n      break;\r\n    // 404请求不存在\r\n    case 404:\r\n      tip('请求的资源不存在','error');\r\n      break;\r\n    default:\r\n      console.log(other);\r\n  }}\r\n\r\n// 创建axios实例\r\nvar instance = axios.create({baseURL:BASE_URL,timeout: 1000 * 12});\r\n// 设置post请求头\r\ninstance.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n/**\r\n * 请求拦截器\r\n * 每次请求前，如果存在token则在请求头中携带token\r\n */\r\ninstance.interceptors.request.use(\r\n  config => {\r\n    // 登录流程控制中，根据本地是否存在token判断用户的登录情况\r\n    // 但是即使token存在，也有可能token是过期的，所以在每次的请求头中携带token\r\n    // 后台根据携带的token判断用户的登录情况，并返回给我们对应的状态码\r\n    // 而后我们可以在响应拦截器中，根据状态码进行一些统一的操作。\r\n    const token = store.state.token;\r\n    token && (config.headers.Authorization = token);\r\n    return config;\r\n  },\r\n  error => Promise.error(error))\r\n\r\n// 响应拦截器\r\ninstance.interceptors.response.use(\r\n  // 请求成功\r\n  res => res.status === 200 ? Promise.resolve(res.data) : Promise.reject(res.data),\r\n  // 请求失败\r\n  error => {\r\n    const { response } = error;\r\n    if (response) {\r\n      // 请求已发出，但是不在2xx的范围\r\n      errorHandle(response.status, response.data.message);\r\n      return Promise.reject(response);\r\n    } else {\r\n      // 处理断网的情况\r\n      // eg:请求超时或断网时，更新state的network状态\r\n      // network状态在app.vue中控制着一个全局的断网提示组件的显示隐藏\r\n      // 关于断网组件中的刷新重新获取数据，会在断网组件中说明\r\n      if (!window.navigator.onLine) {\r\n        // h5使用 pc忽略\r\n        // store.commit('changeNetwork', false);\r\n      } else {\r\n        return Promise.reject(error);\r\n      }\r\n    }\r\n  });\r\n\r\nexport default instance;\r\n"]}]}