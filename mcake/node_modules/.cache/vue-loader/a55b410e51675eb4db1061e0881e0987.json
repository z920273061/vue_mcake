{"remainingRequest":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\cakeProject\\cake\\src\\components\\goodsItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\WorkSpace\\cakeProject\\cake\\src\\components\\goodsItem.vue","mtime":1582019120181},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiZ29vZHNJdGVtIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbnVtOiAxLAogICAgICAgICAgICBhZGRDYXJ0Qm94VmlzaWJsZTogZmFsc2UsCiAgICAgICAgICAgIHByaWNlOiB0aGlzLmdvb2RzLnNrdUxpc3RbMF0ucHJpY2UsLy/ljZXku7cKICAgICAgICAgICAgdG90YWxQcmljZTogMCwvLwogICAgICAgICAgICBza3U6IHRoaXMuZ29vZHMuc2t1TGlzdFswXSwvL+mAieS4reeahHNrdSDliqDlhaXotK3nianovaYKICAgICAgICAgICAgc2hvd1NrdTogdGhpcy5nb29kcy5za3VMaXN0WzBdLmZpdCA/IHRoaXMuZ29vZHMuc2t1TGlzdFswXS53ZWlnaHQgKyAnIC0gJyArIHRoaXMuZ29vZHMuc2t1TGlzdFswXS5maXQgOiB0aGlzLmdvb2RzLnNrdUxpc3RbMF0ud2VpZ2h0LAogICAgICAgIH0KICAgIH0sCiAgICBwcm9wczogWydnb29kcyddLAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBfbnVtOiB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5udW0gPSBuZXdWYWx1ZS5yZXBsYWNlKC9bXlxkXS9nLCAnJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8v6L+b5YWl6K+m5oOF6aG1CiAgICAgICAgdG9EZXRhaWwoKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnZ29vZHNEZXRhaWwnLCBwYXJhbXM6IHtnb29kc0lkOiB0aGlzLmdvb2RzLmdvb2RzSWR9fSkKICAgICAgICB9LAogICAgICAgIC8v5YWz6Zet5by556qXCiAgICAgICAgY2xvc2VBZGRDYXJ0Qm94KCkgewogICAgICAgICAgICB0aGlzLmFkZENhcnRCb3hWaXNpYmxlID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIC8v6YCJ5oupc2t1CiAgICAgICAgY2hvb3NlU2t1KHZhbHVlKSB7CiAgICAgICAgICAgIGxldCBza3UgPSB7fTsKICAgICAgICAgICAgbGV0IHdlaWdodCA9ICcnOwogICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignIC0gJykgIT0gLTEpIHsKICAgICAgICAgICAgICAgIHdlaWdodCA9IHZhbHVlLnNwbGl0KCcgLSAnKVswXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHdlaWdodCA9IHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZ29vZHMuc2t1TGlzdC5tYXAoaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS53ZWlnaHQgPT0gd2VpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgc2t1ID0gaXRlbTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuc2t1ID0gc2t1OwogICAgICAgICAgICB0aGlzLnByaWNlID0gc2t1LnByaWNlOwogICAgICAgIH0sCiAgICAgICAgLy/lop7liqDmlbDph48KICAgICAgICBjaGFuZ2VOdW0odHlwZSkgewogICAgICAgICAgICBpZiAodHlwZSkgewogICAgICAgICAgICAgICAgdGhpcy5udW0rKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMubnVtID4gMSA/IHRoaXMubnVtLS0gOiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvL+ehruiupOWKoOWFpei0reeJqei9pgogICAgICAgIGNvbW1pdCgpIHsKICAgICAgICAgIGlmKCF0aGlzLiRzdG9yZS5zdGF0ZS5pc0xvZ2luKXsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmnKrnmbvlvZUnKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAnZ29vZHNJZCc6IHRoaXMuZ29vZHMuZ29vZHNJZCwvL+WVhuWTgWlkCiAgICAgICAgICAgICAgICAnZ29vZHNOYW1lQ0gnOiB0aGlzLmdvb2RzLmdvb2RzTmFtZSwvL+WVhuWTgeS4reaWh+WQjeensAogICAgICAgICAgICAgICAgJ3ByaWNlJzogdGhpcy5wcmljZSwvLyDljZXku7cKICAgICAgICAgICAgICAgICdpbWcnOiB0aGlzLmdvb2RzLmltZywKICAgICAgICAgICAgICAgICdza3UnOiB7CiAgICAgICAgICAgICAgICAgICAgJ3NrdUlkJzogdGhpcy5za3Uuc2t1SWQsCiAgICAgICAgICAgICAgICAgICAgInNpemUiOiB0aGlzLnNrdS5zaXplLAogICAgICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiB0aGlzLnNrdS53ZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgImZpdCI6IHRoaXMuc2t1LmZpdCwKICAgICAgICAgICAgICAgICAgICAicHJpY2UiOiB0aGlzLnNrdS5wcmljZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdjYXJ0TnVtJzogdGhpcy5udW0sLy/otK3kubDmlbDph48KICAgICAgICAgICAgICAgICdpc0NoZWNrZWQnOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuYWRkQ2FydChwYXJhbXMpOwogICAgICAgIH0sCiAgICAgICAgLy/liqDlhaXotK3nianovaYKICAgICAgICBhZGRDYXJ0KHBhcmFtcykgewogICAgICAgICAgdGhpcy4kYXBpLmdvb2RzLmFkZENhcnQocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09ICcwJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2FydEJveFZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOWIsOi0reeJqei9puaIkOWKnycsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOWIsOi0reeJqei9puWksei0pScsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["goodsItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"goodsItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"goodsItem\" >\r\n    <img class='goodsImg' v-bind:src=\"goods.img\" alt=\"\" @click=\"toDetail\">\r\n    <h3>{{goods.goodsName}}</h3>\r\n    <div class=\"goodsPrice\">\r\n      <span>￥{{goods.skuList[0].price}}</span>\r\n      <el-button type=\"text\" @click.stop=\"addCartBoxVisible = true\">\r\n        <img src=\"../assets/imgs/car.png\">\r\n      </el-button>\r\n    </div>\r\n\r\n    <!--  隐藏的弹窗 -->\r\n    <div class=\"cartBox\" @click.stop=\"\">\r\n      <el-dialog :visible.sync=\"addCartBoxVisible\" width=\"400px\">\r\n        <div class=\"cartBoxContent\" slot=\"\">\r\n          <div class=\"cartImg\">\r\n            <img v-lazy=\"goods.img\">\r\n            <div>\r\n              <span>{{goods.goodsNameCH}}</span>\r\n              <span>{{goods.goodsNameEN}}</span>\r\n              <span>￥{{price * num}}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"cartSku\">\r\n            <span>规格选择</span>\r\n            <el-select v-model=\"showSku\" @change=\"chooseSku\">\r\n              <el-option\r\n                v-for=\"(item,index) in goods.skuList\"\r\n                :key=\"index\"\r\n                :value=\"item.fit?item.weight+' - '+item.fit:item.weight\"\r\n                :value-key='item.skuId'>\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          <div class=\"cartNum\">\r\n            <span>数量选择</span>\r\n            <div class=\"num\">\r\n              <span class=\"jian\" @click=\"changeNum(0)\">-</span>\r\n              <input type=\"text\" v-model=\"_num\" class=\"number\">\r\n              <span class=\"jia\" @click=\"changeNum(1)\">+</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div slot=\"footer\" class=\"cartBoxFooter\">\r\n          <div @click=\"closeAddCartBox\">取消</div>\r\n          <div @click=\"commit\">确认</div>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios';\r\n\r\n    export default {\r\n        name: \"goodsItem\",\r\n        data() {\r\n            return {\r\n                num: 1,\r\n                addCartBoxVisible: false,\r\n                price: this.goods.skuList[0].price,//单价\r\n                totalPrice: 0,//\r\n                sku: this.goods.skuList[0],//选中的sku 加入购物车\r\n                showSku: this.goods.skuList[0].fit ? this.goods.skuList[0].weight + ' - ' + this.goods.skuList[0].fit : this.goods.skuList[0].weight,\r\n            }\r\n        },\r\n        props: ['goods'],\r\n        computed: {\r\n            _num: {\r\n                get: function () {\r\n                    return this.num;\r\n                },\r\n                set: function (newValue) {\r\n                    this.num = newValue.replace(/[^\\d]/g, '');\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            //进入详情页\r\n            toDetail() {\r\n                this.$router.push({name: 'goodsDetail', params: {goodsId: this.goods.goodsId}})\r\n            },\r\n            //关闭弹窗\r\n            closeAddCartBox() {\r\n                this.addCartBoxVisible = false\r\n            },\r\n            //选择sku\r\n            chooseSku(value) {\r\n                let sku = {};\r\n                let weight = '';\r\n                if (value.indexOf(' - ') != -1) {\r\n                    weight = value.split(' - ')[0];\r\n                } else {\r\n                    weight = value;\r\n                }\r\n                this.goods.skuList.map(item => {\r\n                    if (item.weight == weight) {\r\n                        sku = item;\r\n                    }\r\n                });\r\n                this.sku = sku;\r\n                this.price = sku.price;\r\n            },\r\n            //增加数量\r\n            changeNum(type) {\r\n                if (type) {\r\n                    this.num++;\r\n                } else {\r\n                    this.num > 1 ? this.num-- : null;\r\n                }\r\n            },\r\n            //确认加入购物车\r\n            commit() {\r\n              if(!this.$store.state.isLogin){\r\n                this.$message.warning('未登录');\r\n                this.$router.push('/login');\r\n                return;\r\n              }\r\n                let params = {\r\n                    'goodsId': this.goods.goodsId,//商品id\r\n                    'goodsNameCH': this.goods.goodsName,//商品中文名称\r\n                    'price': this.price,// 单价\r\n                    'img': this.goods.img,\r\n                    'sku': {\r\n                        'skuId': this.sku.skuId,\r\n                        \"size\": this.sku.size,\r\n                        \"weight\": this.sku.weight,\r\n                        \"fit\": this.sku.fit,\r\n                        \"price\": this.sku.price\r\n                    },\r\n                    'cartNum': this.num,//购买数量\r\n                    'isChecked': true\r\n                };\r\n                this.addCart(params);\r\n            },\r\n            //加入购物车\r\n            addCart(params) {\r\n              this.$api.goods.addCart(params).then(res => {\r\n                if (res.status == '0') {\r\n                        this.addCartBoxVisible = false;\r\n                        this.$message({\r\n                            message: '添加到购物车成功',\r\n                            type: 'success'\r\n                        });\r\n                    } else {\r\n                        this.$message({\r\n                            message: '添加到购物车失败',\r\n                            type: 'error'\r\n                        });\r\n                    }\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .goodsItem {\r\n    width: 350px;\r\n\r\n    .goodsImg {\r\n      width: 350px;\r\n      height: 350px;\r\n      margin-bottom: 12px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    h3 {\r\n      margin-bottom: 6px;\r\n      line-height: 20px;\r\n    }\r\n\r\n    h4 {\r\n      font-weight: normal;\r\n      font-size: 12px;\r\n      color: #7a7a7a;\r\n      margin-bottom: 10px;\r\n    }\r\n\r\n    .goodsPrice {\r\n      height: 50px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      span {\r\n        font-weight: 500;\r\n        font-size: 18px;\r\n        color: #000;\r\n      }\r\n\r\n      img {\r\n        vertical-align: middle;\r\n        cursor: pointer;\r\n        margin-right: 38px;\r\n      }\r\n    }\r\n\r\n    .cartBox {\r\n      /deep/ .el-dialog__body {\r\n        padding: 0;\r\n      }\r\n\r\n      /deep/ .el-dialog__footer {\r\n        padding: 0;\r\n      }\r\n\r\n      .cartBoxContent {\r\n        .cartImg {\r\n          display: flex;\r\n          height: 120px;\r\n\r\n          img {\r\n            width: 100px;\r\n            height: 100px;\r\n            margin-right: 24px;\r\n            margin-left: 16px;\r\n          }\r\n\r\n          span {\r\n            display: block;\r\n            font-size: 16px;\r\n            margin-bottom: 6px;\r\n          }\r\n\r\n          span:nth-child(2) {\r\n            color: #a2a2a2;\r\n          }\r\n        }\r\n\r\n        .cartSku, .cartNum {\r\n          padding-left: 16px;\r\n          padding-right: 24px;\r\n          color: #a2a2a2;\r\n          font-size: 16px;\r\n          height: 50px;\r\n          line-height: 50px;\r\n          border-top: 1px solid #eaeaea;\r\n          border-bottom: 1px solid #eaeaea;\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          position: relative;\r\n\r\n          /deep/ input.el-input__inner {\r\n            height: 30px;\r\n            font-size: 16px;\r\n            border: none;\r\n            color: #888;\r\n            text-align: right;\r\n            outline: none;\r\n            appearance: none;\r\n          }\r\n        }\r\n\r\n        .cartNum {\r\n          border: none;\r\n\r\n          .num {\r\n            display: flex;\r\n            align-items: center;\r\n\r\n            .number {\r\n              width: 30px;\r\n              text-align: center;\r\n              border: none;\r\n              outline: none;\r\n              /*margin: 0px 10px 0px;*/\r\n            }\r\n\r\n            span {\r\n              width: 25px;\r\n              height: 25px;\r\n              font-size: 20px;\r\n              display: inline-block;\r\n              text-align: center;\r\n              line-height: 25px;\r\n              background: #f0f0f0;\r\n              border-radius: 50%;\r\n              cursor: pointer;\r\n              user-select: none;\r\n            }\r\n\r\n            span:hover {\r\n              background: #ffe32a;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .cartBoxFooter {\r\n        display: flex;\r\n\r\n        div {\r\n          width: 50%;\r\n          height: 50px;\r\n          font-size: 20px;\r\n          text-align: center;\r\n          background-color: #ffe32a;\r\n          line-height: 50px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        div:nth-child(1) {\r\n          background-color: #888;\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}