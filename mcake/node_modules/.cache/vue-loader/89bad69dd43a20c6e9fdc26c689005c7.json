{"remainingRequest":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\cakeProject\\cake\\src\\components\\goodsItem.vue?vue&type=style&index=0&id=5c0871ae&scoped=true&lang=less&","dependencies":[{"path":"E:\\WorkSpace\\cakeProject\\cake\\src\\components\\goodsItem.vue","mtime":1576574382496},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\cakeProject\\cake\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZ29vZHNJdGVtIHsKICB3aWR0aDogMzUwcHg7CgogIC5nb29kc0ltZyB7CiAgICB3aWR0aDogMzUwcHg7CiAgICBoZWlnaHQ6IDM1MHB4OwogICAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICB9CgogIGgzIHsKICAgIG1hcmdpbi1ib3R0b206IDZweDsKICAgIGxpbmUtaGVpZ2h0OiAyMHB4OwogIH0KCiAgaDQgewogICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIGNvbG9yOiAjN2E3YTdhOwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICB9CgogIC5nb29kc1ByaWNlIHsKICAgIGhlaWdodDogNTBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwoKICAgIHNwYW4gewogICAgICBmb250LXdlaWdodDogNTAwOwogICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgIGNvbG9yOiAjMDAwOwogICAgfQoKICAgIGltZyB7CiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgbWFyZ2luLXJpZ2h0OiAzOHB4OwogICAgfQogIH0KCiAgLmNhcnRCb3ggewogICAgL2RlZXAvIC5lbC1kaWFsb2dfX2JvZHkgewogICAgICBwYWRkaW5nOiAwOwogICAgfQoKICAgIC9kZWVwLyAuZWwtZGlhbG9nX19mb290ZXIgewogICAgICBwYWRkaW5nOiAwOwogICAgfQoKICAgIC5jYXJ0Qm94Q29udGVudCB7CiAgICAgIC5jYXJ0SW1nIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGhlaWdodDogMTIwcHg7CgogICAgICAgIGltZyB7CiAgICAgICAgICB3aWR0aDogMTAwcHg7CiAgICAgICAgICBoZWlnaHQ6IDEwMHB4OwogICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyNHB4OwogICAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7CiAgICAgICAgfQoKICAgICAgICBzcGFuIHsKICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgc3BhbjpudGgtY2hpbGQoMikgewogICAgICAgICAgY29sb3I6ICNhMmEyYTI7CiAgICAgICAgfQogICAgICB9CgogICAgICAuY2FydFNrdSwgLmNhcnROdW0gewogICAgICAgIHBhZGRpbmctbGVmdDogMTZweDsKICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4OwogICAgICAgIGNvbG9yOiAjYTJhMmEyOwogICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICBoZWlnaHQ6IDUwcHg7CiAgICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7CiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CgogICAgICAgIC9kZWVwLyBpbnB1dC5lbC1pbnB1dF9faW5uZXIgewogICAgICAgICAgaGVpZ2h0OiAzMHB4OwogICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgY29sb3I6ICM4ODg7CiAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgICAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLmNhcnROdW0gewogICAgICAgIGJvcmRlcjogbm9uZTsKCiAgICAgICAgLm51bSB7CiAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKCiAgICAgICAgICAubnVtYmVyIHsKICAgICAgICAgICAgd2lkdGg6IDMwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICAvKm1hcmdpbjogMHB4IDEwcHggMHB4OyovCiAgICAgICAgICB9CgogICAgICAgICAgc3BhbiB7CiAgICAgICAgICAgIHdpZHRoOiAyNXB4OwogICAgICAgICAgICBoZWlnaHQ6IDI1cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNXB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICB9CgogICAgICAgICAgc3Bhbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmUzMmE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLmNhcnRCb3hGb290ZXIgewogICAgICBkaXNwbGF5OiBmbGV4OwoKICAgICAgZGl2IHsKICAgICAgICB3aWR0aDogNTAlOwogICAgICAgIGhlaWdodDogNTBweDsKICAgICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmUzMmE7CiAgICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB9CgogICAgICBkaXY6bnRoLWNoaWxkKDEpIHsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4OwogICAgICAgIGNvbG9yOiAjZmZmOwogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["goodsItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"goodsItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"goodsItem\" >\r\n    <img class='goodsImg' v-bind:src=\"goods.img\" alt=\"\" @click=\"toDetail\">\r\n    <h3>{{goods.goodsNameCH}}</h3>\r\n    <h4>{{goods.goodsNameEN}}</h4>\r\n    <div class=\"goodsPrice\">\r\n      <span>￥{{goods.skuList[0].price}}</span>\r\n      <el-button type=\"text\" @click.stop=\"addCartBoxVisible = true\">\r\n        <img src=\"../assets/imgs/car.png\">\r\n      </el-button>\r\n    </div>\r\n\r\n    <!--  隐藏的弹窗 -->\r\n    <div class=\"cartBox\" @click.stop=\"\">\r\n      <el-dialog :visible.sync=\"addCartBoxVisible\" width=\"400px\">\r\n        <div class=\"cartBoxContent\" slot=\"\">\r\n          <div class=\"cartImg\">\r\n            <img v-lazy=\"goods.img\">\r\n            <div>\r\n              <span>{{goods.goodsNameCH}}</span>\r\n              <span>{{goods.goodsNameEN}}</span>\r\n              <span>￥{{price * num}}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"cartSku\">\r\n            <span>规格选择</span>\r\n            <el-select v-model=\"showSku\" @change=\"chooseSku\">\r\n              <el-option\r\n                v-for=\"(item,index) in goods.skuList\"\r\n                :key=\"index\"\r\n                :value=\"item.fit?item.weight+' - '+item.fit:item.weight\"\r\n                :value-key='item.skuId'>\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          <div class=\"cartNum\">\r\n            <span>数量选择</span>\r\n            <div class=\"num\">\r\n              <span class=\"jian\" @click=\"changeNum(0)\">-</span>\r\n              <input type=\"text\" v-model=\"_num\" class=\"number\">\r\n              <span class=\"jia\" @click=\"changeNum(1)\">+</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div slot=\"footer\" class=\"cartBoxFooter\">\r\n          <div @click=\"closeAddCartBox\">取消</div>\r\n          <div @click=\"commit\">确认</div>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios';\r\n\r\n    export default {\r\n        name: \"goodsItem\",\r\n        data() {\r\n            return {\r\n                num: 1,\r\n                addCartBoxVisible: false,\r\n                price: this.goods.skuList[0].price,//单价\r\n                totalPrice: 0,//\r\n                sku: this.goods.skuList[0],//选中的sku 加入购物车\r\n                showSku: this.goods.skuList[0].fit ? this.goods.skuList[0].weight + ' - ' + this.goods.skuList[0].fit : this.goods.skuList[0].weight,\r\n            }\r\n        },\r\n        props: ['goods'],\r\n        computed: {\r\n            _num: {\r\n                get: function () {\r\n                    return this.num;\r\n                },\r\n                set: function (newValue) {\r\n                    this.num = newValue.replace(/[^\\d]/g, '');\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            //进入详情页\r\n            toDetail() {\r\n                this.$router.push({name: 'goodsDetail', params: {goodsId: this.goods.goodsId}})\r\n            },\r\n            //关闭弹窗\r\n            closeAddCartBox() {\r\n                this.addCartBoxVisible = false\r\n            },\r\n            //选择sku\r\n            chooseSku(value) {\r\n                let sku = {};\r\n                let weight = '';\r\n                if (value.indexOf(' - ') != -1) {\r\n                    weight = value.split(' - ')[0];\r\n                } else {\r\n                    weight = value;\r\n                }\r\n                this.goods.skuList.map(item => {\r\n                    if (item.weight == weight) {\r\n                        sku = item;\r\n                    }\r\n                });\r\n                this.sku = sku;\r\n                this.price = sku.price;\r\n            },\r\n            //增加数量\r\n            changeNum(type) {\r\n                if (type) {\r\n                    this.num++;\r\n                } else {\r\n                    this.num > 1 ? this.num-- : null;\r\n                }\r\n            },\r\n            //确认加入购物车\r\n            commit() {\r\n                let params = {\r\n                    'goodsId': this.goods.goodsId,//商品id\r\n                    'goodsNameCH': this.goods.goodsNameCH,//商品中文名称\r\n                    'goodsNameEN': this.goods.goodsNameEN,//商品英文名称\r\n                    'price': this.price,// 单价\r\n                    'img': this.goods.img,\r\n                    'sku': {\r\n                        'skuId': this.sku.skuId,\r\n                        \"size\": this.sku.size,\r\n                        \"weight\": this.sku.weight,\r\n                        \"fit\": this.sku.fit,\r\n                        \"price\": this.sku.price\r\n                    },\r\n                    'cartNum': this.num,//购买数量\r\n                    'isChecked': true\r\n                };\r\n                this.addCart(params);\r\n            },\r\n            //加入购物车\r\n            addCart(params) {\r\n                axios.post('http://localhost:3000/goods/addCart', params).then(res => {\r\n                    if (res.data.status == '0') {\r\n                        this.addCartBoxVisible = false;\r\n                        this.$message({\r\n                            message: '添加到购物车成功',\r\n                            type: 'success'\r\n                        });\r\n                    } else {\r\n                        this.$message({\r\n                            message: '添加到购物车失败',\r\n                            type: 'error'\r\n                        });\r\n                    }\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .goodsItem {\r\n    width: 350px;\r\n\r\n    .goodsImg {\r\n      width: 350px;\r\n      height: 350px;\r\n      margin-bottom: 12px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    h3 {\r\n      margin-bottom: 6px;\r\n      line-height: 20px;\r\n    }\r\n\r\n    h4 {\r\n      font-weight: normal;\r\n      font-size: 12px;\r\n      color: #7a7a7a;\r\n      margin-bottom: 10px;\r\n    }\r\n\r\n    .goodsPrice {\r\n      height: 50px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      span {\r\n        font-weight: 500;\r\n        font-size: 18px;\r\n        color: #000;\r\n      }\r\n\r\n      img {\r\n        vertical-align: middle;\r\n        cursor: pointer;\r\n        margin-right: 38px;\r\n      }\r\n    }\r\n\r\n    .cartBox {\r\n      /deep/ .el-dialog__body {\r\n        padding: 0;\r\n      }\r\n\r\n      /deep/ .el-dialog__footer {\r\n        padding: 0;\r\n      }\r\n\r\n      .cartBoxContent {\r\n        .cartImg {\r\n          display: flex;\r\n          height: 120px;\r\n\r\n          img {\r\n            width: 100px;\r\n            height: 100px;\r\n            margin-right: 24px;\r\n            margin-left: 16px;\r\n          }\r\n\r\n          span {\r\n            display: block;\r\n            font-size: 16px;\r\n            margin-bottom: 6px;\r\n          }\r\n\r\n          span:nth-child(2) {\r\n            color: #a2a2a2;\r\n          }\r\n        }\r\n\r\n        .cartSku, .cartNum {\r\n          padding-left: 16px;\r\n          padding-right: 24px;\r\n          color: #a2a2a2;\r\n          font-size: 16px;\r\n          height: 50px;\r\n          line-height: 50px;\r\n          border-top: 1px solid #eaeaea;\r\n          border-bottom: 1px solid #eaeaea;\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          position: relative;\r\n\r\n          /deep/ input.el-input__inner {\r\n            height: 30px;\r\n            font-size: 16px;\r\n            border: none;\r\n            color: #888;\r\n            text-align: right;\r\n            outline: none;\r\n            appearance: none;\r\n          }\r\n        }\r\n\r\n        .cartNum {\r\n          border: none;\r\n\r\n          .num {\r\n            display: flex;\r\n            align-items: center;\r\n\r\n            .number {\r\n              width: 30px;\r\n              text-align: center;\r\n              border: none;\r\n              outline: none;\r\n              /*margin: 0px 10px 0px;*/\r\n            }\r\n\r\n            span {\r\n              width: 25px;\r\n              height: 25px;\r\n              font-size: 20px;\r\n              display: inline-block;\r\n              text-align: center;\r\n              line-height: 25px;\r\n              background: #f0f0f0;\r\n              border-radius: 50%;\r\n              cursor: pointer;\r\n              user-select: none;\r\n            }\r\n\r\n            span:hover {\r\n              background: #ffe32a;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .cartBoxFooter {\r\n        display: flex;\r\n\r\n        div {\r\n          width: 50%;\r\n          height: 50px;\r\n          font-size: 20px;\r\n          text-align: center;\r\n          background-color: #ffe32a;\r\n          line-height: 50px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        div:nth-child(1) {\r\n          background-color: #888;\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}